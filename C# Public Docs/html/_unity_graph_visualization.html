<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DHART: Visualizing DHART Data in Unity</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome-css.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DHART
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_unity_graph_visualization.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Visualizing DHART Data in Unity </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md56">Intro</a></li>
<li class="level1"><a href="#autotoc_md57">Node Visualizer</a><ul><li class="level2"><a href="#autotoc_md58">Setting the Particle Property</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md59">Generating a Graph</a><ul><li class="level2"><a href="#autotoc_md60">Helper Scripts</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_src_Csharp_docs_markdown_6_visualizing_graph"></a> Previous Tutorial: <a class="el" href="_unity_imported_mesh.html">Reading an Imported Mesh in Unity</a></p>
<h1><a class="anchor" id="autotoc_md56"></a>
Intro</h1>
<p >In this tutorial we'll be using the project created in the previous tutorial: <a class="el" href="_unity_imported_mesh.html">Reading an Imported Mesh in Unity</a>, and we'll be using concepts and code covered in the previous guides.</p>
<p >In this guide we will cover:</p>
<ul>
<li>Using a Unity Node Visualizer for displaying the graph</li>
</ul>
<p >The majority of this tutorial is specific to Unity. It provides some helper functions to easily place (and fast rendering) points in space related to the DHART output.</p>
<h1><a class="anchor" id="autotoc_md57"></a>
Node Visualizer</h1>
<p >The main component of this tutorial is using a node visualization script. As this is Unity specific, we won't go into detail explaining the script. It has an extra feature for coloring nodes which we don't take advantage of, but could easily be used for coloring nodes by a score or weight.</p>
<p >First, create a script called <code>NodeVisualizer.cs</code>.</p>
<p >Copy and paste the following code into this file.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span>System.Collections.Generic;</div>
<div class="line"><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>DHARTUTILS</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> NodeScoreType { </div>
<div class="line">        edgeConnection, </div>
<div class="line">        linear </div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    [RequireComponent(typeof(ParticleSystem))]</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>NodeVisualizer : MonoBehaviour</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> ParticleSystem nodeParticleSystem;</div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> NodeVisualizer instance;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">void</span> Awake()</div>
<div class="line">        {</div>
<div class="line">            </div>
<div class="line">            instance = <span class="keyword">this</span>; <span class="comment">// init singleton</span></div>
<div class="line">            nodeParticleSystem = GetComponent&lt;ParticleSystem&gt;(); <span class="comment">// Init components</span></div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> VisualizeAllToAllNode(<a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> position, Color color)</div>
<div class="line">        {</div>
<div class="line">            ParticleSystem.MainModule psMain = nodeParticleSystem.main;</div>
<div class="line">            psMain.startColor = color;</div>
<div class="line">            nodeParticleSystem.transform.position = <span class="keyword">new</span> Vector3(position.<a class="code hl_variable" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#a46b34f99709c14b7d8be79cf1b0debbc">x</a>, position.<a class="code hl_variable" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#a15acdf142c31ca74018da12d8516a85f">y</a>, position.<a class="code hl_variable" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#abac3c90f7958d6d98ba3e7c81cfbd6ab">z</a>);</div>
<div class="line">            nodeParticleSystem.Emit(1);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> List&lt;Color&gt; CreateColors(<span class="keywordtype">float</span>[] scores)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// coloring</span></div>
<div class="line">            GradientColorKey[] gradientColorKeys = <span class="keyword">new</span> GradientColorKey[3];</div>
<div class="line">            gradientColorKeys[0].color = Color.red;</div>
<div class="line">            gradientColorKeys[0].time = 0.0f;</div>
<div class="line">            gradientColorKeys[1].color = Color.green;</div>
<div class="line">            gradientColorKeys[1].time = 0.5f;</div>
<div class="line">            gradientColorKeys[2].color = Color.blue;</div>
<div class="line">            gradientColorKeys[2].time = 1.0f;</div>
<div class="line"> </div>
<div class="line">            GradientAlphaKey[] gradientAlphaKeys = <span class="keyword">new</span> GradientAlphaKey[3];</div>
<div class="line">            gradientAlphaKeys[0].alpha = 1.0f;</div>
<div class="line">            gradientAlphaKeys[0].time = 0.0f;</div>
<div class="line">            gradientAlphaKeys[1].alpha = 1.0f;</div>
<div class="line">            gradientAlphaKeys[1].time = 1.0f;</div>
<div class="line">            gradientAlphaKeys[2].alpha = 1.0f;</div>
<div class="line">            gradientAlphaKeys[2].time = 1.0f;</div>
<div class="line"> </div>
<div class="line">            Gradient gradient = <span class="keyword">new</span> Gradient();</div>
<div class="line">            gradient.colorKeys = gradientColorKeys;</div>
<div class="line">            gradient.alphaKeys = gradientAlphaKeys;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// get max score</span></div>
<div class="line">            <span class="keywordtype">float</span> maxScore = 0.0f;</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; scores.Length; i++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">float</span> currScore = scores[i];</div>
<div class="line">                <span class="keywordflow">if</span> (currScore &gt; maxScore)</div>
<div class="line">                    maxScore = currScore;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordtype">float</span>[] clampedScores = <span class="keyword">new</span> <span class="keywordtype">float</span>[scores.Length];</div>
<div class="line">            List&lt;Color&gt; colors = <span class="keyword">new</span> List&lt;Color&gt;();</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; scores.Length; i++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">float</span> value = scores[i];</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<span class="keywordtype">float</span>.IsInfinity(value) || <span class="keywordtype">float</span>.IsNaN(value))</div>
<div class="line">                {</div>
<div class="line">                    Debug.Log(<span class="stringliteral">&quot;Aggregated edge cost result equaled infinity or NaN.&quot;</span> +</div>
<div class="line">                        <span class="stringliteral">&quot;Setting its value in the array to 0 to avoid crashes.&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line">                clampedScores[i] = Mathf.Clamp(scores[i], 0, maxScore) / maxScore;</div>
<div class="line">                Color color = gradient.Evaluate(clampedScores[i]);</div>
<div class="line">                colors.Add(color);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> colors;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a></div><div class="ttdoc">Automated analysis of the built environent</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:9</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_vector3_d_html"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">DHARTAPI.Vector3D</a></div><div class="ttdoc">A three dimensional vector with built in utility functions.</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:40</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_vector3_d_html_a15acdf142c31ca74018da12d8516a85f"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#a15acdf142c31ca74018da12d8516a85f">DHARTAPI.Vector3D.y</a></div><div class="ttdeci">readonly float y</div><div class="ttdoc">Y component of this vector.</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:42</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_vector3_d_html_a46b34f99709c14b7d8be79cf1b0debbc"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#a46b34f99709c14b7d8be79cf1b0debbc">DHARTAPI.Vector3D.x</a></div><div class="ttdeci">readonly float x</div><div class="ttdoc">X component of this vector.</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:41</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_vector3_d_html_abac3c90f7958d6d98ba3e7c81cfbd6ab"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html#abac3c90f7958d6d98ba3e7c81cfbd6ab">DHARTAPI.Vector3D.z</a></div><div class="ttdeci">readonly float z</div><div class="ttdoc">Z component of this vector.</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:43</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md58"></a>
Setting the Particle Property</h2>
<p >First we will make a new material that will be used by the particle system. Navigate (or create) a folder in the Assets called Materials.</p>
<p >Right click and Create-&gt;Material</p>
<p ><img src="walkthroughs/unity/6_graph_visualization/create_material.JPG" alt="Creating Material" class="inline"/></p>
<p >Rename the material to "Node Material" and select it in the Assets browser. <br  />
</p>
<p >In the Inspector, match the values shown in the following image. Specifically, the <code>Shader</code> dropdown should be set to <code>UI</code>-&gt;<code>Default</code>.</p>
<div class="image">
<img src="node_material.JPG" alt=""/>
<div class="caption">
Material Properties</div></div>
    <ul>
<li>Make an empty game object in the scene hierarchy called "NodeViz".</li>
<li>Drag and drop the <code>NodeVisualization.cs</code> script onto the NodeViz game object.</li>
</ul>
<div class="image">
<img src="scene_setup_1.JPG" alt=""/>
<div class="caption">
Particle System</div></div>
    <p >Now that there is a particle system, go through each setting and make sure it matches the settings shown in the images below. Note that the Renderer has a material, which is what you will use to assign the material created in the step above.</p>
<div class="image">
<img src="particle_system_1.JPG" alt=""/>
<div class="caption">
Particle System</div></div>
    <div class="image">
<img src="particle_system_2.JPG" alt=""/>
<div class="caption">
Particle System</div></div>
    <h1><a class="anchor" id="autotoc_md59"></a>
Generating a Graph</h1>
<p >At this point we assume you have followed the previous tutorials, and so much of this code should be easy enough to follow along. If you have any questions please post on the github Discussions page.</p>
<ul>
<li>Create a script called <code>DHART_Graph.cs</code></li>
</ul>
<p >Drag this script onto the Main Camera game object</p>
<p >This script is largely a combination of the previous tutorials with a few differences. <br  />
</p>
<ul>
<li>We take a gameobject for a starting point that can be used to interactively change where the graph starts. <br  />
</li>
<li>The graph nodes are copied to C# and the coordinates are converted back to Unity.</li>
<li>The converted nodes are visualized by passing to a function we call <code>PlotNodes()</code>.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><span class="keyword">using </span>System.Linq;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_ray_tracing.html">DHARTAPI.RayTracing</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_geometry.html">DHARTAPI.Geometry</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_spatial_structures.html">DHARTAPI.SpatialStructures</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_graph_generator.html">DHARTAPI.GraphGenerator</a>;</div>
<div class="line"><span class="keyword">using </span>DHARTUTILS;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>DHART_Graph : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a> WalkableBVH; <span class="comment">// a BVH for walkable space</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> max_nodes = 100;</div>
<div class="line">    <span class="keyword">public</span> GameObject StartPoint;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html">Graph</a> graph; <span class="comment">// Most recently generated graph</span></div>
<div class="line">    <span class="keyword">public</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node_list.html">NodeList</a> node_list; <span class="comment">// nodes of the most recently generated graph</span></div>
<div class="line">    <span class="keyword">public</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node.html">Node</a>[] nodes = <span class="keyword">null</span>; <span class="comment">// Nodes of the most recently generated graph copied out of the graph</span></div>
<div class="line">                                </div>
<div class="line">    <span class="keyword">public</span> GameObject MeshParent;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// A node visualizer</span></div>
<div class="line">    <span class="keyword">private</span> NodeVisualizer nodeVisualizer;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Start is called before the first frame update</span></div>
<div class="line">    <span class="keywordtype">void</span> Start()</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line">        nodeVisualizer = NodeVisualizer.instance;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Only enable the one at mesh parent index</span></div>
<div class="line">        MeshParent.SetActive(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get every mesh from this parent</span></div>
<div class="line">        var meshes = MeshUtils.GetMeshesFromParent(MeshParent);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Send them to the humanfactors manager to be converted to meshinfo for the bvh</span></div>
<div class="line">        this.CreateSeperateBVH(meshes);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get the start point of the graph from unity game object </span></div>
<div class="line">        Vector3 start_point = this.StartPoint.transform.position;</div>
<div class="line">        <span class="comment">// Convert to right hand z-up</span></div>
<div class="line">        start_point = <span class="keyword">new</span> Vector3(start_point.x * -1, start_point.z * -1, start_point.y);</div>
<div class="line">        <span class="comment">// generate graph</span></div>
<div class="line">        this.CreateGraph(start_point);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pull nodes out of the graph</span></div>
<div class="line">        <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node.html">Node</a>[] graph_nodes = this.graph.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html#ae223d1a997bf7a74df671c91f3d86f3a">getNodes</a>().<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_native_utils_1_1_native_array.html#ab7752bf1c17226805cfbdda25fa74c7a">CopyArray</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Nodes are Z up and Right-hand.        </span></div>
<div class="line">        Vector3[] nodes_vec = TransformUtils.Node_to_Vector(graph_nodes);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Various methods for moving around nodes</span></div>
<div class="line">        Vector3[] nodes_Yup = TransformUtils.PointList_Z2Y(nodes_vec); <span class="comment">// Convert to Y up</span></div>
<div class="line">        Vector3[] nodes_Lcoor = TransformUtils.PointList_R2L(nodes_Yup); <span class="comment">// Convert to left hand</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Visualize the different node transformations</span></div>
<div class="line"> </div>
<div class="line">        PlotNodes(nodes_Lcoor, 0, 0, 1); <span class="comment">// Show rotated Y up and then left hand coordinate as blue</span></div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create A BVH for casting rays, and a BVH for generating the graph. </span></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> CreateSeperateBVH(Mesh[] global)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Create meshinfo for every mesh in the graph, and rotate them from y-up to z-up</span></div>
<div class="line">        <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Meshes = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[global.Length];</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Meshes.Length; i++)</div>
<div class="line">        {</div>
<div class="line">            var tris = global[i].triangles;</div>
<div class="line">            var vert_array = MeshUtils.FlattenVerticeArray(global[i].vertices, <span class="keyword">true</span>);</div>
<div class="line">            var mesh_name = global[i].<a class="code hl_variable" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html#af58173d1db44391517c87047842ed724">name</a>;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Make sure there are vertices in this mesh</span></div>
<div class="line">            <span class="keywordflow">if</span>(vert_array.Length &gt; 0){</div>
<div class="line">                Meshes[i] = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>(tris, vert_array, mesh_name);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Remove nulls</span></div>
<div class="line">        Meshes = Meshes.Where(c =&gt; c != <span class="keyword">null</span>).ToArray();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Filter BVHs using substring matching and some set logic. </span></div>
<div class="line">        <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Doors = Meshes.Where(mesh =&gt; (mesh.name.ToLower().Contains(<span class="stringliteral">&quot;door&quot;</span>))).ToArray();</div>
<div class="line">        <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Windows = Meshes.Where(mesh =&gt; (mesh.name.ToLower().Contains(<span class="stringliteral">&quot;window&quot;</span>))).ToArray();</div>
<div class="line">        <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Global = Meshes.Except(Doors).Except(Windows).ToArray();</div>
<div class="line"> </div>
<div class="line">        var walkableMesh = Global.Union(Doors).ToArray();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Make sure the final mesh exists</span></div>
<div class="line">        <span class="keywordflow">if</span> (walkableMesh.Length &gt; 0){</div>
<div class="line">            this.WalkableBVH = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a>(walkableMesh);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">private</span> <span class="keywordtype">void</span> PlotNodes(Vector3[] nodes, <span class="keywordtype">int</span> r = 0, <span class="keywordtype">int</span> g = 0, <span class="keywordtype">int</span> b = 0)</div>
<div class="line">    {</div>
<div class="line">        Color color = <span class="keyword">new</span> Color(r, g, b);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nodes.Length; i++)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> node = <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(nodes[i].x, nodes[i].y, nodes[i].z);</div>
<div class="line">            nodeVisualizer.VisualizeAllToAllNode(node, color);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a new path at the start point. All of the inputs are hardcoded for the sake of time</span></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">bool</span> CreateGraph(Vector3 StartPoint)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// If no BVH has been generated, then return so we don&#39;t crash</span></div>
<div class="line">        <span class="keywordflow">if</span> (this.WalkableBVH == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Generate a graph</span></div>
<div class="line">        <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> start = MeshUtils.ConvertToVector3D(StartPoint);</div>
<div class="line">        <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> spacing = <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0.2f, 0.2f, 1.7f);</div>
<div class="line"> </div>
<div class="line">        Debug.Log(<span class="stringliteral">&quot;Converted start of graph: &quot;</span> + start);</div>
<div class="line"> </div>
<div class="line">        var graph_watch = System.Diagnostics.Stopwatch.StartNew();</div>
<div class="line">        this.graph = <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_graph_generator_1_1_graph_generator.html">GraphGenerator</a>.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_graph_generator_1_1_graph_generator.html#afd70d8304d009c1816a711d6be6bdf29">GenerateGraph</a>(this.WalkableBVH, start, spacing, this.max_nodes, up_step: 0.4f, down_step: 0.4f);</div>
<div class="line">        graph_watch.Stop();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// if it failed return false</span></div>
<div class="line">        <span class="keywordflow">if</span> (this.graph == <span class="keyword">null</span>)</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Otherwise update our node arrays and compress the graph</span></div>
<div class="line">            Debug.Log(<span class="stringliteral">&quot;Graph Generated &quot;</span> + graph.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html#a7113a8d636abc5510a3f794cbc2bf2f4">NumNodes</a>().ToString() + <span class="stringliteral">&quot; nodes in &quot;</span> + graph_watch.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);</div>
<div class="line">            this.node_list = graph.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html#ae223d1a997bf7a74df671c91f3d86f3a">getNodes</a>();</div>
<div class="line">            graph.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html#a49e6fcb61ca17ee4ba5cb6a2045f9334">CompressToCSR</a>();</div>
<div class="line">            this.nodes = node_list.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_native_utils_1_1_native_array.html#ab7752bf1c17226805cfbdda25fa74c7a">CopyArray</a>();</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">DHARTAPI.Geometry.MeshInfo</a></div><div class="ttdoc">A collection of vertices and indices representing geometry.</div><div class="ttdef"><b>Definition:</b> MeshInfo.cs:50</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info_html_af58173d1db44391517c87047842ed724"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html#af58173d1db44391517c87047842ed724">DHARTAPI.Geometry.MeshInfo.name</a></div><div class="ttdeci">string name</div><div class="ttdoc">Name of the mesh.</div><div class="ttdef"><b>Definition:</b> MeshInfo.cs:52</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_graph_generator_1_1_graph_generator_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_graph_generator_1_1_graph_generator.html">DHARTAPI.GraphGenerator.GraphGenerator</a></div><div class="ttdoc">Generate a graph of accessible space on a mesh.</div><div class="ttdef"><b>Definition:</b> GraphGenerator.cs:45</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_graph_generator_1_1_graph_generator_html_afd70d8304d009c1816a711d6be6bdf29"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_graph_generator_1_1_graph_generator.html#afd70d8304d009c1816a711d6be6bdf29">DHARTAPI.GraphGenerator.GraphGenerator.GenerateGraph</a></div><div class="ttdeci">static Graph GenerateGraph(EmbreeBVH bvh, Vector3D start_point, Vector3D spacing, int max_nodes=-1, float up_step=0.2f, float up_slope=20, float down_step=0.2f, float down_slope=20, int max_step_connections=1, int min_connections=1, int core_count=-1, int[] obstacle_ids=null, int[] walkable_ids=null)</div><div class="ttdoc">Generate a graph of accessible space with the given settings. If no graph can be generated,...</div><div class="ttdef"><b>Definition:</b> GraphGenerator.cs:101</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_native_utils_1_1_native_array_html_ab7752bf1c17226805cfbdda25fa74c7a"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_native_utils_1_1_native_array.html#ab7752bf1c17226805cfbdda25fa74c7a">DHARTAPI.NativeUtils.NativeArray.CopyArray</a></div><div class="ttdeci">virtual T[] CopyArray()</div><div class="ttdoc">Copy the unmanaged array pointed to by this object into a managed array.</div><div class="ttdef"><b>Definition:</b> PointerHolder.cs:247</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">DHARTAPI.RayTracing.EmbreeBVH</a></div><div class="ttdoc">A Bounding Volume Hierarchy for the EmbreeRaytracer.</div><div class="ttdef"><b>Definition:</b> EmbreeBVH.cs:31</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html">DHARTAPI.SpatialStructures.Graph</a></div><div class="ttdoc">A graph representing connections between points in space.</div><div class="ttdef"><b>Definition:</b> Graph.cs:112</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph_html_a49e6fcb61ca17ee4ba5cb6a2045f9334"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html#a49e6fcb61ca17ee4ba5cb6a2045f9334">DHARTAPI.SpatialStructures.Graph.CompressToCSR</a></div><div class="ttdeci">CSRInfo CompressToCSR(string cost_type=&quot;&quot;)</div><div class="ttdoc">Compress the graph into a CSR representation, and get pointers to it.</div><div class="ttdef"><b>Definition:</b> Graph.cs:241</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph_html_a7113a8d636abc5510a3f794cbc2bf2f4"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html#a7113a8d636abc5510a3f794cbc2bf2f4">DHARTAPI.SpatialStructures.Graph.NumNodes</a></div><div class="ttdeci">int NumNodes()</div><div class="ttdoc">Get the number of nodes in this graph.</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph_html_ae223d1a997bf7a74df671c91f3d86f3a"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_graph.html#ae223d1a997bf7a74df671c91f3d86f3a">DHARTAPI.SpatialStructures.Graph.getNodes</a></div><div class="ttdeci">NodeList getNodes()</div><div class="ttdoc">Get an array containing the graph's current nodes.</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node_list_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node_list.html">DHARTAPI.SpatialStructures.NodeList</a></div><div class="ttdoc">An array of Nodes directly from a graph in unmanaged memory.</div><div class="ttdef"><b>Definition:</b> Node.cs:56</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_geometry_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_geometry.html">DHARTAPI.Geometry</a></div><div class="ttdoc">Manipulate and load geometry from disk.</div><div class="ttdef"><b>Definition:</b> CommonRotations.cs:4</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_graph_generator_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_graph_generator.html">DHARTAPI.GraphGenerator</a></div><div class="ttdoc">Generate a graph of accessible space from a given start point.</div><div class="ttdef"><b>Definition:</b> GraphGenerator.cs:36</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_ray_tracing_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_ray_tracing.html">DHARTAPI.RayTracing</a></div><div class="ttdoc">Cast rays to determine if and where they intersect geometry.</div><div class="ttdef"><b>Definition:</b> EmbreeBVH.cs:7</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_spatial_structures_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_spatial_structures.html">DHARTAPI.SpatialStructures</a></div><div class="ttdoc">Standard fundamental data structures for representing space used throughout DHARTAPI.</div><div class="ttdef"><b>Definition:</b> Graph.cs:20</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node_html"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node.html">DHARTAPI.SpatialStructures.Node</a></div><div class="ttdoc">A point in space.</div><div class="ttdef"><b>Definition:</b> Node.cs:17</div></div>
</div><!-- fragment --><p >Once this script is created, select the Main Camera, which should have your script, drag the empty game object called GraphStart and the Mesh model to the "Mesh Parent" space.</p>
<h2><a class="anchor" id="autotoc_md60"></a>
Helper Scripts</h2>
<ul>
<li>Create a script called <code>MeshUtils.cs</code></li>
<li>Create a script called <code>TransformUtils.cs</code></li>
</ul>
<p >These do not need to be assigned to any object.</p>
<p >The <code>MeshUtils.cs</code> continues from the previous script:</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>;</div>
<div class="line"><span class="keyword">using </span>System.Collections.Generic;</div>
<div class="line"><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><span class="keyword">using </span>UnityEngine.Rendering;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span>MeshUtils</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Just combine all the submeshes into one big mesh, transforming their</span></div>
<div class="line">    <span class="comment">// vertices by the passed transformation matrix.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">public</span> Mesh CombineSubmeshes(Mesh mesh, Matrix4x4 matrix)</div>
<div class="line">    {</div>
<div class="line">        List&lt;CombineInstance&gt; ci = <span class="keyword">new</span> List&lt;CombineInstance&gt;();</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mesh.subMeshCount; i++)</div>
<div class="line">        {</div>
<div class="line">            CombineInstance combine = <span class="keyword">new</span> CombineInstance();</div>
<div class="line">            combine.mesh = mesh;</div>
<div class="line">            combine.transform = matrix;</div>
<div class="line">            combine.subMeshIndex = i;</div>
<div class="line"> </div>
<div class="line">            ci.Add(combine);</div>
<div class="line">        }</div>
<div class="line">        Mesh out_mesh = <span class="keyword">new</span> Mesh();</div>
<div class="line">        out_mesh.indexFormat = IndexFormat.UInt32;</div>
<div class="line">        out_mesh.CombineMeshes(ci.ToArray(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line">        out_mesh.name = mesh.name;</div>
<div class="line">        <span class="keywordflow">return</span> out_mesh;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Mesh[] GetMeshesFromParent(GameObject MeshParent)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Get the meshrenders from the parent</span></div>
<div class="line">        var mesh_renders = MeshParent.GetComponentsInChildren&lt;MeshFilter&gt;();</div>
<div class="line"> </div>
<div class="line">        List&lt;Mesh&gt; out_meshes = <span class="keyword">new</span> List&lt;Mesh&gt;();</div>
<div class="line">        <span class="comment">// Get the transforms and renderer for each mesh</span></div>
<div class="line">        <span class="keywordflow">foreach</span> (var filter <span class="keywordflow">in</span> mesh_renders)</div>
<div class="line">        {</div>
<div class="line">            out_meshes.Add(MeshUtils.CombineSubmeshes(filter.mesh, filter.transform.localToWorldMatrix));</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> out_meshes.ToArray();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span>[] FlattenVerticeArray(Vector3[] inds, <span class="keywordtype">bool</span> convert_coord = <span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">float</span>[] return_array = <span class="keyword">new</span> <span class="keywordtype">float</span>[inds.Length * 3];</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; inds.Length; i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> os = i * 3;</div>
<div class="line">            <span class="keywordflow">if</span> (convert_coord)</div>
<div class="line">            {</div>
<div class="line">                return_array[os] = -1 * inds[i].x;</div>
<div class="line">                return_array[os + 1] = -1 * inds[i].z;</div>
<div class="line">                return_array[os + 2] = inds[i].y;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                return_array[os] = inds[i].x;</div>
<div class="line">                return_array[os + 1] = inds[i].y;</div>
<div class="line">                return_array[os + 2] = inds[i].z;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> return_array;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> ConvertToVector3D(Vector3 PointToConvert, <span class="keywordtype">bool</span> convert_coords = <span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// CHANGES COORD</span></div>
<div class="line">        <span class="comment">// Left hand  Y-UP to Right hand Z-UP</span></div>
<div class="line">        <span class="keywordflow">if</span> (convert_coords) <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(-1 * PointToConvert.x, -1 * PointToConvert.z, PointToConvert.y);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(PointToConvert.x, PointToConvert.y, PointToConvert.z);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><p >The <code>TransformUtils.cs</code> has a few helper functions for coordinate conversion as well as datatypes. The code to copy is:</p>
<div class="fragment"><div class="line"><span class="keyword">using </span>System.Collections.Generic;</div>
<div class="line"><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_spatial_structures.html">DHARTAPI.SpatialStructures</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>DHARTUTILS</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">class </span>TransformUtils</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Vector3[] PointList_Z2Y(Vector3[] nodes_in)</div>
<div class="line">        {</div>
<div class="line">            Vector3[] nodes = <span class="keyword">new</span> Vector3[nodes_in.Length];</div>
<div class="line">            <span class="comment">// Rotate the point from Z up coordinates to Y up coordinates</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nodes.Length; i++)</div>
<div class="line">            {</div>
<div class="line">                nodes[i].x = nodes_in[i].x; <span class="comment">// Rotating around X, so X does not change</span></div>
<div class="line">                nodes[i].y = nodes_in[i].z; <span class="comment">// Y is up, so Y replaces Z</span></div>
<div class="line">                nodes[i].z = -1 * nodes_in[i].y; <span class="comment">// Z moves to negative Y</span></div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> nodes;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Vector3[] PointList_R2L(Vector3[] nodes_in)</div>
<div class="line">        {</div>
<div class="line">            Vector3[] nodes = <span class="keyword">new</span> Vector3[nodes_in.Length];</div>
<div class="line">            <span class="comment">// Flip the X axis to go from right hand coordinates to left hand coordinates</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nodes.Length; i++)</div>
<div class="line">            {</div>
<div class="line">                nodes[i].x = -1 * nodes_in[i].x;</div>
<div class="line">                nodes[i].y = nodes_in[i].y;</div>
<div class="line">                nodes[i].z = nodes_in[i].z;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> nodes;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Vector3D&gt; ToVector3D(Vector3[] nodes_in)</div>
<div class="line">        {</div>
<div class="line">            List&lt;Vector3D&gt; v3d_nodes = <span class="keyword">new</span> List&lt;Vector3D&gt;();</div>
<div class="line">            <span class="comment">// Iterate through nodes</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nodes_in.Length; i++)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Create a Vector3D</span></div>
<div class="line">                <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> nodePos = <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(nodes_in[i].x, nodes_in[i].y, nodes_in[i].z);</div>
<div class="line">                <span class="comment">// Add it to the list</span></div>
<div class="line">                v3d_nodes.Add(nodePos);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> v3d_nodes;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Vector3[] Node_to_Vector(<a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_spatial_structures_1_1_node.html">Node</a>[] nodesList)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Convert list of nodes to list of vectors</span></div>
<div class="line">            Vector3[] node_vec = <span class="keyword">new</span> Vector3[nodesList.Length];</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nodesList.Length; i++)</div>
<div class="line">                node_vec[i] = <span class="keyword">new</span> Vector3(nodesList[i].x, nodesList[i].y, nodesList[i].z);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">return</span> node_vec;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line">} <span class="comment">// End  Namespace</span></div>
</div><!-- fragment --><ul>
<li>Create an empty game object called <code>GraphStart</code></li>
</ul>
<p >Place this object above the geometry in which you will generate a graph. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Aug 15 2025 19:01:58 for DHART by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
