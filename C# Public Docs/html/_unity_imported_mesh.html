<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DHART: Reading an Imported Mesh within Unity</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome-css.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DHART
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_unity_imported_mesh.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Reading an Imported Mesh within Unity </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md47">Intro</a></li>
<li class="level1"><a href="#autotoc_md48">Scene Setup</a></li>
<li class="level1"><a href="#autotoc_md49">Helper Functions</a></li>
<li class="level1"><a href="#autotoc_md50">Loading the Mesh for DHART</a><ul><li class="level2"><a href="#autotoc_md51">Script Setup</a></li>
<li class="level2"><a href="#autotoc_md52">Mesh Extraction</a></li>
<li class="level2"><a href="#autotoc_md53">Mesh Parsing</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md54">Testing BVH</a></li>
<li class="level1"><a href="#autotoc_md55">Assigning the Mesh and Running</a></li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_src_Csharp_docs_markdown_5_reading_imported_mesh"></a> Previous Tutorial: <a class="el" href="_mesh_from_unity.html">Reading a Mesh From Unity</a></p>
<h1><a class="anchor" id="autotoc_md47"></a>
Intro</h1>
<p >In this tutorial we'll be using the project created in the first tutorial: <a class="el" href="_unity_project_setup.html">Project Setup</a>, and we'll be using concepts and code covered in the previous guides.</p>
<p >In this guide we will cover:</p>
<ul>
<li>Assigning a nested game object containing a mesh from an imported file or prefab</li>
<li>Combining meshes within Unity</li>
<li>Transforming meshes between Unity and DHART coordinates</li>
</ul>
<p >The majority of this tutorial is specific to Unity, and is mostly about converting the mesh data from Unity into a format understandable by DHART.</p>
<h1><a class="anchor" id="autotoc_md48"></a>
Scene Setup</h1>
<p >In the previous tutorial we showed how to use a mesh from within Unity. Due to the wide-ranging file imports and settings for Unity, there are a few important requirements to understand when trying to use a prefab or object that was imported from Unity.</p>
<p >The first requirement is to enable the <code>Read/Write</code> attribute of the imported file by selecting the model in the Assets browser and going to the <code>Inspector</code> as shown in the following image:</p>
<div class="image">
<img src="import_settings.JPG" alt=""/>
<div class="caption">
Import Settings</div></div>
    <p >For a similar reason (accessing vertices in Unity scripts), under the inspector for the model, the <code>Batching Static</code> must not be selected. The object does not need to be static, but if it is, this particular attribute cannot be used.</p>
<div class="image">
<img src="batching_static.png" alt=""/>
<div class="caption">
Batching Static</div></div>
    <h1><a class="anchor" id="autotoc_md49"></a>
Helper Functions</h1>
<p >There are a few functions we have written to help parse Unity-specific data that are not included in DHART (since they are specific to Unity). <br  />
</p>
<ul>
<li>Create a C# script called <code>MeshUtils.cs</code></li>
<li>Copy and paste the code below into this script.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">using </span>System.Collections.Generic;</div>
<div class="line"><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><span class="keyword">using </span>UnityEngine.Rendering;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span>MeshUtils</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Mesh CombineSubmeshes(Mesh mesh, Matrix4x4 matrix)</div>
<div class="line">    {</div>
<div class="line">        List&lt;CombineInstance&gt; ci = <span class="keyword">new</span> List&lt;CombineInstance&gt;();</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mesh.subMeshCount; i++)</div>
<div class="line">        {</div>
<div class="line">            CombineInstance combine = <span class="keyword">new</span> CombineInstance();</div>
<div class="line">            combine.mesh = mesh;</div>
<div class="line">            combine.transform = matrix;</div>
<div class="line">            combine.subMeshIndex = i;</div>
<div class="line"> </div>
<div class="line">            ci.Add(combine);</div>
<div class="line">        }</div>
<div class="line">        Mesh out_mesh = <span class="keyword">new</span> Mesh();</div>
<div class="line">        out_mesh.indexFormat = IndexFormat.UInt32;</div>
<div class="line">        out_mesh.CombineMeshes(ci.ToArray(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line">        out_mesh.name = mesh.name;</div>
<div class="line">        <span class="keywordflow">return</span> out_mesh;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Mesh[] GetMeshesFromParent(GameObject MeshParent)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Get the meshrenders from the parent</span></div>
<div class="line">        var mesh_renders = MeshParent.GetComponentsInChildren&lt;MeshFilter&gt;();</div>
<div class="line"> </div>
<div class="line">        List&lt;Mesh&gt; out_meshes = <span class="keyword">new</span> List&lt;Mesh&gt;();</div>
<div class="line">        <span class="comment">// Get the transforms and renderer for each mesh</span></div>
<div class="line">        <span class="keywordflow">foreach</span> (var filter <span class="keywordflow">in</span> mesh_renders){</div>
<div class="line">            out_meshes.Add(MeshUtils.CombineSubmeshes(filter.mesh, filter.transform.localToWorldMatrix));</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> out_meshes.ToArray();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span>[] FlattenVertArray(Vector3[] inds, <span class="keywordtype">bool</span> convert_coord = <span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">float</span>[] return_array = <span class="keyword">new</span> <span class="keywordtype">float</span>[inds.Length * 3];</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; inds.Length; i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> os = i * 3;</div>
<div class="line">            <span class="keywordflow">if</span> (convert_coord)</div>
<div class="line">            {</div>
<div class="line">                return_array[os] = -1 * inds[i].x;</div>
<div class="line">                return_array[os + 1] = -1 * inds[i].z;</div>
<div class="line">                return_array[os + 2] = inds[i].y;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                return_array[os] = inds[i].x;</div>
<div class="line">                return_array[os + 1] = inds[i].y;</div>
<div class="line">                return_array[os + 2] = inds[i].z;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> return_array;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><p >In summary there are two main functions that we use, <code>FlattenVertArray</code> and <code>GetMeshesFromParent</code>. The first function has an option to convert the coordinates from Unity to DHART defaults, which we will use in the next section.</p>
<h1><a class="anchor" id="autotoc_md50"></a>
Loading the Mesh for DHART</h1>
<p >Now you will create another script called <code>DHART_BVH.cs</code>.</p>
<p >This script will have a public facing variable than can be set in the Unity Editor. With the included references, the script starts with:</p>
<h2><a class="anchor" id="autotoc_md51"></a>
Script Setup</h2>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_geometry.html">DHARTAPI.Geometry</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_d_h_a_r_t_a_p_i_1_1_ray_tracing.html">DHARTAPI.RayTracing</a>;</div>
<div class="line"><span class="keyword">using </span>System.Linq;</div>
<div class="line"><span class="keyword">using </span>UnityEngine;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>DHART_BVH : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a> BVH; <span class="comment">// a BVH </span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> GameObject MeshParent;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Start is called before the first frame update</span></div>
<div class="line">    <span class="keywordtype">void</span> Start()</div>
<div class="line">    {</div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">DHARTAPI.RayTracing.EmbreeBVH</a></div><div class="ttdoc">A Bounding Volume Hierarchy for the EmbreeRaytracer.</div><div class="ttdef"><b>Definition:</b> EmbreeBVH.cs:31</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_geometry_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_geometry.html">DHARTAPI.Geometry</a></div><div class="ttdoc">Manipulate and load geometry from disk.</div><div class="ttdef"><b>Definition:</b> CommonRotations.cs:4</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_1_1_ray_tracing_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i_1_1_ray_tracing.html">DHARTAPI.RayTracing</a></div><div class="ttdoc">Cast rays to determine if and where they intersect geometry.</div><div class="ttdef"><b>Definition:</b> EmbreeBVH.cs:7</div></div>
<div class="ttc" id="anamespace_d_h_a_r_t_a_p_i_html"><div class="ttname"><a href="namespace_d_h_a_r_t_a_p_i.html">DHARTAPI</a></div><div class="ttdoc">Automated analysis of the built environent</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:9</div></div>
</div><!-- fragment --><p >Next, within <code>Start()</code>, we will set the mesh to active, use our helper function for getting meshes under this parent:</p>
<div class="fragment"><div class="line">MeshParent.SetActive(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get every mesh from this parent</span></div>
<div class="line">var inputMeshes = MeshUtils.GetMeshesFromParent(MeshParent);</div>
</div><!-- fragment --><p >Note that this function is mostly used for nested objects, meaning that instead of a single mesh game object, we have a list of objects under a game object and we want to include all of them.</p>
<div class="image">
<img src="object_list.png" alt=""/>
<div class="caption">
Batching Static</div></div>
    <p >Now that we have a list of all the meshes, we iterate through each mesh, extract the triangles (vertex indices), get a vertex array with converted coordinates (using our helper function), and finally make a <code>MeshInfo</code> object of that data.</p>
<h2><a class="anchor" id="autotoc_md52"></a>
Mesh Extraction</h2>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Meshes = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[inputMeshes.Length];</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Meshes.Length; i++)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Get the triangles, verts, and name of mesh</span></div>
<div class="line">    var tris = inputMeshes[i].triangles;</div>
<div class="line">    var vert_array = MeshUtils.FlattenVertArray(inputMeshes[i].vertices, <span class="keyword">true</span>);</div>
<div class="line">    var mesh_name = inputMeshes[i].<a class="code hl_variable" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html#af58173d1db44391517c87047842ed724">name</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Make sure there are vertices in this mesh</span></div>
<div class="line">    <span class="keywordflow">if</span> (vert_array.Length &gt; 0) {</div>
<div class="line">        Meshes[i] = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>(tris, vert_array, mesh_name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">DHARTAPI.Geometry.MeshInfo</a></div><div class="ttdoc">A collection of vertices and indices representing geometry.</div><div class="ttdef"><b>Definition:</b> MeshInfo.cs:50</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info_html_af58173d1db44391517c87047842ed724"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html#af58173d1db44391517c87047842ed724">DHARTAPI.Geometry.MeshInfo.name</a></div><div class="ttdeci">string name</div><div class="ttdoc">Name of the mesh.</div><div class="ttdef"><b>Definition:</b> MeshInfo.cs:52</div></div>
</div><!-- fragment --><p >The line that checks <code>if (vert_array.Length &gt; 0)</code> is <b>IMPORTANT!</b>. We must remove any meshes that do not have vertices. A simple way to do this at the end of the mesh conversion process is to remove the null values of the array (the indices we skipped).</p>
<div class="fragment"><div class="line"><span class="comment">// Remove null meshes</span></div>
<div class="line">Meshes = Meshes.Where(c =&gt; c != <span class="keyword">null</span>).ToArray();</div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;<b>Passing an invalid mesh to the BVH is a likely cause of crashes.</b> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md53"></a>
Mesh Parsing</h2>
<p >The only real function that we need is <code>this.BVH = new EmbreeBVH(walkableMesh);</code>. However, we also show some nice helper functions to structure your project. For example, in this script we demonstrate how to check for a specific string name in the meshes (for example, if you had a naming convention), and remove the meshes that are not of interest.</p>
<div class="fragment"><div class="line"><span class="comment">// Filter BVHs using substring matching and some set logic. </span></div>
<div class="line"><a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Doors = Meshes.Where(mesh =&gt; (mesh.name.ToLower().Contains(<span class="stringliteral">&quot;door&quot;</span>))).ToArray();</div>
<div class="line"><a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Windows = Meshes.Where(mesh =&gt; (mesh.name.ToLower().Contains(<span class="stringliteral">&quot;window&quot;</span>))).ToArray();</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_geometry_1_1_mesh_info.html">MeshInfo</a>[] Global = Meshes.Except(Doors).Except(Windows).ToArray();</div>
<div class="line"> </div>
<div class="line">var walkableMesh = Global.Union(Doors).ToArray();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Make sure the final mesh exists</span></div>
<div class="line"><span class="keywordflow">if</span> (walkableMesh.Length &gt; 0) {</div>
<div class="line">    this.BVH = <span class="keyword">new</span> <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_b_v_h.html">EmbreeBVH</a>(walkableMesh);</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md54"></a>
Testing BVH</h1>
<p >Finally, we run a quick test to make sure our BVH was properly loaded. This example uses (0,0,1) and (0,0,-1) as the coordinates, but you should use any values that you know will be hit by a ray.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Cast a Ray in a known direction (will depend on your mesh)</span></div>
<div class="line"><a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> origin = <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0, 0, 1);</div>
<div class="line"><a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a> direction = <span class="keyword">new</span> <a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">Vector3D</a>(0, 0, -1);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Cast ray and get the distance/MeshID</span></div>
<div class="line"><a class="code hl_struct" href="struct_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_ray_result.html">RayResult</a> result = <a class="code hl_class" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_raytracer.html">EmbreeRaytracer</a>.<a class="code hl_function" href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_raytracer.html#a62d9e4325d103c0618d224b574a94ae0">IntersectForDistance</a>(this.BVH, origin, direction);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Print the distance/MeshID</span></div>
<div class="line">Debug.Log(result);</div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_raytracer_html"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_raytracer.html">DHARTAPI.RayTracing.EmbreeRaytracer</a></div><div class="ttdoc">Cast rays with Intel's Embree raytracing library.</div><div class="ttdef"><b>Definition:</b> EmbreeRayTracer.cs:41</div></div>
<div class="ttc" id="aclass_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_raytracer_html_a62d9e4325d103c0618d224b574a94ae0"><div class="ttname"><a href="class_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_embree_raytracer.html#a62d9e4325d103c0618d224b574a94ae0">DHARTAPI.RayTracing.EmbreeRaytracer.IntersectForDistance</a></div><div class="ttdeci">static RayResult IntersectForDistance(EmbreeBVH bvh, Vector3D origin, Vector3D direction, float max_distance=-1)</div><div class="ttdoc">Cast a single ray and get the distance to its hit and the meshID if it hit anything.</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_ray_result_html"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_ray_tracing_1_1_ray_result.html">DHARTAPI.RayTracing.RayResult</a></div><div class="ttdoc">MeshID and Distance for a casted ray.</div><div class="ttdef"><b>Definition:</b> RayResultStructs.cs:20</div></div>
<div class="ttc" id="astruct_d_h_a_r_t_a_p_i_1_1_vector3_d_html"><div class="ttname"><a href="struct_d_h_a_r_t_a_p_i_1_1_vector3_d.html">DHARTAPI.Vector3D</a></div><div class="ttdoc">A three dimensional vector with built in utility functions.</div><div class="ttdef"><b>Definition:</b> CommonTypes.cs:40</div></div>
</div><!-- fragment --><p >and of course, don't forget to close the Class and <code>Start()</code> functions.</p>
<div class="fragment"><div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md55"></a>
Assigning the Mesh and Running</h1>
<p >The final step is to save the file, go back into the editor, click and drag the <code>DHART_BVH</code> script onto the Main Camera (you could also make an empty game object, but this is easier).</p>
<div class="image">
<img src="script_assignment.png" alt=""/>
<div class="caption">
Assigning Script</div></div>
    <p >Once the script is attached to the game object, click the game object (Main Camera in this case). In the inspector you should see the <code>Mesh Parent</code> that was created in our script. Without changing the selection, click and drag the mesh from the scene hierarchy to the Mesh Parent, as shown in the image.</p>
<div class="image">
<img src="model_assignment.png" alt=""/>
<div class="caption">
Assigning Model</div></div>
    <p >And, thats its. You should be able to press play and the distance and mesh id should be displayed on the console. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Aug 18 2025 14:48:06 for DHART by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
