\hypertarget{a03534_InstallGuide}{}\doxysection{CMake Install Step Guide}\label{a03534_InstallGuide}
\hypertarget{a03534_autotoc_md0}{}\doxysubsection{Prerequisites}\label{a03534_autotoc_md0}
This tutorial requires knowledge of topics covered in the CMake tutorial on the main page. If you have not yet completed that tutorial at least once, go through it before continuing here.\hypertarget{a03534_autotoc_md1}{}\doxysubsection{Intro}\label{a03534_autotoc_md1}
When you generate a CMake project, CMake will populate the build directory with all the files necessary to build the project using the selected build system. Since each build system uses a different file structure, the placement and creation of all content in the build directory is our of our control (we do copy some files into build directories for testing purposes). For example, \href{https://ninja-build.org/}{\texttt{ Ninja}} uses a different directory structure than a \href{https://docs.microsoft.com/en-us/visualstudio/ide/solutions-and-projects-in-visual-studio?view=vs-2019}{\texttt{ Visual Studio}} project.

With this in mind, how do we get useful output from building our program if we don\textquotesingle{}t know the output directory? The solution\+: \href{https://cmake.org/cmake/help/latest/command/install.html}{\texttt{ CMake\textquotesingle{}s Installation Step}}.

Instead of using the build directory folders as our project\textquotesingle{}s \char`\"{}output\char`\"{} we use CMake\textquotesingle{}s install command to build the project then create and organize an output folder so it\textquotesingle{}s ready to be distributed without any need for manually copying or moving files. In this tutorial we\textquotesingle{}ll walk through the process for installing DHARTAPI from projects generated by the Cmake-\/\+Gui and installing directly from the project folder itself using Visual Studio.\hypertarget{a03534_autotoc_md2}{}\doxysubsection{The Install Step}\label{a03534_autotoc_md2}
Depending on what type of project you have, follow either the Open Folder Project or CMake GUI sections.\hypertarget{a03534_autotoc_md3}{}\doxysubsubsection{Open Folder Project}\label{a03534_autotoc_md3}
 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{open_folder_solution_explorer.png}
\doxyfigcaption{Solution Explorer Folder}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{1.\+1}}\+: {\itshape Solution Explorer for a Visual Studio Open Folder project}

Open Folder means you\textquotesingle{}re operating directly on the CMake directory itself using Visual Studio instead of using the cmake-\/gui to generate a Visual Studio Project.\hypertarget{a03534_autotoc_md4}{}\doxyparagraph{Set Install Directory And Settings}\label{a03534_autotoc_md4}
In an open folder project, the default install directory is {\ttfamily out/install}. If you are fine with the default directory, then you can move onto the next section.

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{cmake_settings_json.png}
\doxyfigcaption{CMake Settings json}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{1.\+2}}\+: {\itshape Highlighted\+: CMake Settings json file}

If you would like to install to another directory, then Double click on {\ttfamily CMakesettings.\+json} in the root of your project to open the CMake settings window.

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{advanced_settings.png}
\doxyfigcaption{Solution explorer Advanced Settings}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{1.\+3}}\+: {\itshape Highlighted and Circled\+: Show Advanced Settings}

Scroll to the bottom then click on {\itshape Show Advanced Settings} to expand the advanced settings.

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{install_directory.png}
\doxyfigcaption{Install directory}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{1.\+4}}\+: {\itshape Highlighted\+: Install directory textbox}

First under advanced settings, make sure that your options under the Value column match the ones in {\itshape Figure} {\bfseries{1.\+4}} before continuing. You can use either the debug or release configuration, but remember that it will affect which dlls are output once installed. After you\textquotesingle{}ve verified your settings match, enter the path you want to use in Install Directory or click the button to the right of the textbox to select it from a file explorer menu.

{\itshape {\bfseries{Save your changes by pressing Ctrl + S}}} then close the {\ttfamily CMakesettings.\+json} window. Now we will install the project.\hypertarget{a03534_autotoc_md5}{}\doxyparagraph{Build/\+Install}\label{a03534_autotoc_md5}


{\itshape Figure} {\bfseries{1.\+5}}\+: {\itshape Circled\+: Install submenu}

In the toolbar at the top of your screen left click on the Build button then left click the {\itshape Install DHART\+\_\+\+API} option. Visual studio will now automatically build and install the CMake project.

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{output.png}
\doxyfigcaption{Installed Project Output}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{1.\+6}}\+: {\itshape Output of running the install step on a debug with no modifications to the install path.}

The contents of your project should now be built and installed to the location you specified in the install section. If you left the default, then it will be installed to {\ttfamily out/install/x64-\/\+Debug} for the debug build or {\ttfamily out/install/x64-\/\+Release} for the Release build\hypertarget{a03534_autotoc_md6}{}\doxyparagraph{Verifying Output}\label{a03534_autotoc_md6}
 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{install_directory_bin.png}
\doxyfigcaption{Contents of the bin directory}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{1.\+7}}\+: Contents of the Debug {\ttfamily bin} directory.

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{release_build.png}
\doxyfigcaption{Contents of the bin directory release}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{1.\+8}}\+: Contents of the Release {\ttfamily bin} directory.

To verify that the install step was completed successfully, open the {\ttfamily bin} folder in the directory you\textquotesingle{}ve installed the project to. The contents of the bin directory should match those shown in {\itshape Figure 1.\+7} or {\itshape Figure 1.\+8} depending on whether you used the install or release builds. If this is true, then you\textquotesingle{}ve successfully performed the install step for DHARTAPI. If the contents don\textquotesingle{}t match, make sure that your settings for the project you used exactly match those stated in the tutorial then try again.\hypertarget{a03534_autotoc_md7}{}\doxysubsubsection{CMake GUI}\label{a03534_autotoc_md7}
 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{cmake_gui_solution_explorer.png}
\doxyfigcaption{Solution Explorer for the CMake GUI}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{2.\+1}}\+: {\itshape cmake-\/gui project output with INSTALL target highlighted}

This assumes you\textquotesingle{}ve already generated the Visual Studio project with the CMake GUI using the guide from the mainpage. Your solution explorer should look similar to that shown in {\itshape Figure 2.\+1}, however you have more or less targets depending on the settings you generated the project with. Right now the only target that is relevant is the INSTALL target.\hypertarget{a03534_autotoc_md8}{}\doxyparagraph{Set Install Directory And Settings}\label{a03534_autotoc_md8}
 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{install_prefix.png}
\doxyfigcaption{CMake Install prefix}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{2.\+2}}\+: {\itshape Highlighted\+: CMake Install Prefix}

The generated project\textquotesingle{}s install directory is set by the {\ttfamily CMAKE\+\_\+\+INSTALL\+\_\+\+PREFIX} variable in the CMake GUI. You can modify this by double clicking on the path and entering the path to the folder you want to use as output. For this tutorial we\textquotesingle{}ll install the project into a new folder in our Documents folder. {\itshape Ensure that your settings for the options in the DHARTAPI group match those specified in this CMake project.} If you\textquotesingle{}ve already generated a project, you will need to regenerate the project it by pressing the {\itshape Generate} button as shown in the mainpage tutorial.\hypertarget{a03534_autotoc_md9}{}\doxyparagraph{Build/\+Install}\label{a03534_autotoc_md9}
 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{how_to_change_config.png}
\doxyfigcaption{Build Button}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{2.\+3}}\+: {\itshape Visual studio install configuration type drop down.}

Before installing the project, take a look at the configuration type being built. This can be manually set by using the standard Visual Studio drop down at the top center of the screen. Remember what setting you have this set to before installing, because it will affect the output.

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{build_button_circled.png}
\doxyfigcaption{Build Button}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{2.\+4}}\+: {\itshape Circled\+: Build button for the install target.}

Right Click on the INSTALL target, then click the {\itshape Build} option.



{\itshape Figure} {\bfseries{2.\+5}}\+: {\itshape Output of running the install step on a debug with no modifications to the install path.}

Just like in open folder walkthrough, the contents of your project should now be built and installed to the location you specified as the {\ttfamily CMAKE\+\_\+\+INSTALL\+\_\+\+PREFIX}.\hypertarget{a03534_autotoc_md10}{}\doxyparagraph{Verifying Output}\label{a03534_autotoc_md10}
 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{install_directory_bin.png}
\doxyfigcaption{Contents of the bin directory}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{2.\+6}}\+: Contents of the Debug {\ttfamily bin} directory.

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{release_build.png}
\doxyfigcaption{Contents of the bin directory release}
\end{DoxyImage}
   

{\itshape Figure} {\bfseries{2.\+7}}\+: Contents of the Release {\ttfamily bin} directory.

To verify that the install step was completed successfully, open the {\ttfamily bin} folder in the directory you\textquotesingle{}ve installed the project to. The contents of the bin directory should match those shown in {\itshape Figure 2.\+6} or {\itshape Figure 2.\+7} depending on whether you used the release or debug builds. If this is true, then you\textquotesingle{}ve successfully performed the install step for DHARTAPI. If the contents don\textquotesingle{}t match, make sure that your settings for the project you used exactly match those stated in the tutorial then try again. 