\hypertarget{a00212_source}{}\doxysection{embree\+\_\+raytracer.\+h}
\label{a00212_source}\index{Cpp/raytracer/src/embree\_raytracer.h@{Cpp/raytracer/src/embree\_raytracer.h}}
\mbox{\hyperlink{a00212}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{a00212_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00008}00008 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00009}00009 \textcolor{preprocessor}{\#ifndef EMBREE\_RAY\_TRACER}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00010}\mbox{\hyperlink{a00212_a06bf78213fa612762b01a2b1959bd131}{00010}} \textcolor{preprocessor}{\#define EMBREE\_RAY\_TRACER}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00012}00012 \textcolor{preprocessor}{\#include <rtcore.h>}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00014}00014 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00015}00015 \textcolor{preprocessor}{\#include <corecrt\_math\_defines.h>}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00016}00016 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00017}00017 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00018}00018 \textcolor{preprocessor}{\#include <array>}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00019}00019 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00218}{HitStruct.h}}>}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00020}00020 \textcolor{preprocessor}{\#include <omp.h>}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00022}\mbox{\hyperlink{a00212_a525335710b53cb064ca56b936120431e}{00022}} \textcolor{preprocessor}{\#define \_USE\_MATH\_DEFINES}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00024}00024 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00469}{HF::Geometry}} \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00025}00025     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{class }\mbox{\hyperlink{a01351}{MeshInfo}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00026}00026 \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00041}00041 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00464}{HF::RayTracer}} \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00042}\mbox{\hyperlink{a01407}{00042}}     \textcolor{keyword}{struct }\mbox{\hyperlink{a01407}{Vector3D}} \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00043}\mbox{\hyperlink{a01407_a8dc6f75dc73e95942cca436c146cb83c}{00043}}         \textcolor{keywordtype}{double} \mbox{\hyperlink{a01407_a8dc6f75dc73e95942cca436c146cb83c}{x}}; \textcolor{keywordtype}{double} \mbox{\hyperlink{a01407_af7128e46fb0f8d5ef3e4a7355e9f959f}{y}}; \textcolor{keywordtype}{double} \mbox{\hyperlink{a01407_af6ea0d409b5b9d4833f6a745d4624477}{z}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00045}\mbox{\hyperlink{a01407_ac36232209ecb6d17017c71d33b7313f3}{00045}}         \textcolor{keyword}{inline} \mbox{\hyperlink{a01407_ac36232209ecb6d17017c71d33b7313f3}{Vector3D}}(\textcolor{keywordtype}{double} \mbox{\hyperlink{a01407_a8dc6f75dc73e95942cca436c146cb83c}{x}}, \textcolor{keywordtype}{double} \mbox{\hyperlink{a01407_af7128e46fb0f8d5ef3e4a7355e9f959f}{y}}, \textcolor{keywordtype}{double} \mbox{\hyperlink{a01407_af6ea0d409b5b9d4833f6a745d4624477}{z}}) \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00046}00046             this-\/>x = \mbox{\hyperlink{a01407_a8dc6f75dc73e95942cca436c146cb83c}{x}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00047}00047             this-\/>y = \mbox{\hyperlink{a01407_af7128e46fb0f8d5ef3e4a7355e9f959f}{y}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00048}00048             this-\/>z = \mbox{\hyperlink{a01407_af6ea0d409b5b9d4833f6a745d4624477}{z}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00050}00050         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00051}\mbox{\hyperlink{a01407_aa0c935fabbdc069a24f2c1f780b451f1}{00051}}         \textcolor{keyword}{inline} \mbox{\hyperlink{a01407}{Vector3D}} \mbox{\hyperlink{a01407_aa0c935fabbdc069a24f2c1f780b451f1}{operator-\/}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01407}{Vector3D}}\& v2)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00052}00052             \textcolor{keywordflow}{return} \mbox{\hyperlink{a01407}{Vector3D}}\{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00053}00053                 \mbox{\hyperlink{a01407_a8dc6f75dc73e95942cca436c146cb83c}{x}} -\/ v2.\mbox{\hyperlink{a01407_a8dc6f75dc73e95942cca436c146cb83c}{x}},}
\DoxyCodeLine{\Hypertarget{a00212_source_l00054}00054                 \mbox{\hyperlink{a01407_af7128e46fb0f8d5ef3e4a7355e9f959f}{y}} -\/ v2.\mbox{\hyperlink{a01407_af7128e46fb0f8d5ef3e4a7355e9f959f}{y}},}
\DoxyCodeLine{\Hypertarget{a00212_source_l00055}00055                 \mbox{\hyperlink{a01407_af6ea0d409b5b9d4833f6a745d4624477}{z}} -\/ v2.\mbox{\hyperlink{a01407_af6ea0d409b5b9d4833f6a745d4624477}{z}}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00056}00056             \};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00057}00057         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00058}00058         \textcolor{comment}{// Scalar multiplication overload }}
\DoxyCodeLine{\Hypertarget{a00212_source_l00059}\mbox{\hyperlink{a01407_a2d86f8a3010d26e57a71b17baeb2e69e}{00059}}         \textcolor{keyword}{inline} \mbox{\hyperlink{a01407}{Vector3D}} \mbox{\hyperlink{a01407_a2d86f8a3010d26e57a71b17baeb2e69e}{operator*}}(\textcolor{keyword}{const} \textcolor{keywordtype}{double}\&a)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00060}00060             \textcolor{keywordflow}{return} \mbox{\hyperlink{a01407}{Vector3D}}\{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00061}00061                 a * \mbox{\hyperlink{a01407_a8dc6f75dc73e95942cca436c146cb83c}{x}},}
\DoxyCodeLine{\Hypertarget{a00212_source_l00062}00062                 a * \mbox{\hyperlink{a01407_af7128e46fb0f8d5ef3e4a7355e9f959f}{y}},}
\DoxyCodeLine{\Hypertarget{a00212_source_l00063}00063                 a * \mbox{\hyperlink{a01407_af6ea0d409b5b9d4833f6a745d4624477}{z}}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00064}00064             \};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00065}00065         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00066}00066     \};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00067}00067 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00068}00068     \textcolor{comment}{//*! \(\backslash\)brief Determine whether this mesh did or did not intersect */}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00069}00069     \textcolor{keywordtype}{bool} \mbox{\hyperlink{a00464_a2630761a64fac02a4ee33abaf5c885a1}{DidIntersect}}(\textcolor{keywordtype}{int} mesh\_id);}
\DoxyCodeLine{\Hypertarget{a00212_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00071}00071     \textcolor{keyword}{struct }RayRequest;}
\DoxyCodeLine{\Hypertarget{a00212_source_l00072}00072     \textcolor{keyword}{struct }Vertex;}
\DoxyCodeLine{\Hypertarget{a00212_source_l00073}00073     \textcolor{keyword}{struct }Triangle;}
\DoxyCodeLine{\Hypertarget{a00212_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00083}\mbox{\hyperlink{a01411}{00083}}     \textcolor{keyword}{class }\mbox{\hyperlink{a01411}{EmbreeRayTracer}} \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l00085}\mbox{\hyperlink{a01411_a5608742889ff45a0294fdf21e5a85b2e}{00085}}         RTCDevice \mbox{\hyperlink{a01411_a5608742889ff45a0294fdf21e5a85b2e}{device}}; }
\DoxyCodeLine{\Hypertarget{a00212_source_l00087}\mbox{\hyperlink{a01411_a7c66f28f5b889021767745d198661da0}{00087}}         RTCScene \mbox{\hyperlink{a01411_a7c66f28f5b889021767745d198661da0}{scene}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00089}\mbox{\hyperlink{a01411_a01968c52807e6930909b7f9c31f45e80}{00089}}         RTCIntersectContext \mbox{\hyperlink{a01411_a01968c52807e6930909b7f9c31f45e80}{context}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00091}\mbox{\hyperlink{a01411_a6eced6bbe321079476603f7e7ef97ed8}{00091}}         \mbox{\hyperlink{a00464_a01403}{Triangle}}* \mbox{\hyperlink{a01411_a6eced6bbe321079476603f7e7ef97ed8}{triangles}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00093}\mbox{\hyperlink{a01411_a62b06bf58c3b134de8f271fbc778e412}{00093}}         \mbox{\hyperlink{a00464_a01399}{Vertex}}* \mbox{\hyperlink{a01411_a62b06bf58c3b134de8f271fbc778e412}{Vertices}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00095}\mbox{\hyperlink{a01411_a10fe757b08ab77289cfd945b29d14b89}{00095}}         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a10fe757b08ab77289cfd945b29d14b89}{use\_precise}} = \textcolor{keyword}{false}; }
\DoxyCodeLine{\Hypertarget{a00212_source_l00096}00096 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00097}\mbox{\hyperlink{a01411_a3a243ef02c74fc6df958a4fd2506e7cc}{00097}}         std::vector<RTCGeometry> \mbox{\hyperlink{a01411_a3a243ef02c74fc6df958a4fd2506e7cc}{geometry}}; \textcolor{comment}{//> A list of the geometry being used by RTCScene.}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00098}00098 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00099}00099     \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{a00212_source_l00115}00115         \textcolor{keywordtype}{void} \mbox{\hyperlink{a01411_a19527943d1afe002c1105cb3b3691ca7}{SetupScene}}();}
\DoxyCodeLine{\Hypertarget{a00212_source_l00116}00116 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00130}00130         std::array<Vector3D, 3> \mbox{\hyperlink{a01411_a619072a17db71253fc9ce3bdf1ba1920}{GetTriangle}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} geomID, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} primID) \textcolor{keyword}{const};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00141}00141         \textcolor{keywordtype}{int} \mbox{\hyperlink{a01411_a6ee1e15bc515878b156bc6a3778f8033}{InsertGeom}}(RTCGeometry\& geom, \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = -\/1);}
\DoxyCodeLine{\Hypertarget{a00212_source_l00142}00142 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00166}00166     \textcolor{keywordtype}{double} \mbox{\hyperlink{a01411_a28032c693ac330c5b11bc2a877b04c75}{CalculatePreciseDistance}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00167}00167             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} geom\_id,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00168}00168             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} prim\_id,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00169}00169             \textcolor{keyword}{const} \mbox{\hyperlink{a01407}{Vector3D}}\& origin,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00170}00170             \textcolor{keyword}{const} \mbox{\hyperlink{a01407}{Vector3D}}\& direction) \textcolor{keyword}{const};}
\DoxyCodeLine{\Hypertarget{a00212_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00188}00188 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00230}00230         RTCRayHit \mbox{\hyperlink{a01411_ae3341adf12ae91e33f1188a434d8e28d}{Intersect\_IMPL}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00231}00231             \textcolor{keywordtype}{float} x,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00232}00232             \textcolor{keywordtype}{float} y,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00233}00233             \textcolor{keywordtype}{float} z,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00234}00234             \textcolor{keywordtype}{float} dx,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00235}00235             \textcolor{keywordtype}{float} dy,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00236}00236             \textcolor{keywordtype}{float} dz,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00237}00237             \textcolor{keywordtype}{float} max\_distance = -\/1,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00238}00238             \textcolor{keywordtype}{int} mesh\_id = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l00239}00239         );}
\DoxyCodeLine{\Hypertarget{a00212_source_l00240}00240 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00256}00256 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00296}00296         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_ade19fda460dadd98769b347840bd305a}{Occluded\_IMPL}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00297}00297             \textcolor{keywordtype}{float} x,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00298}00298             \textcolor{keywordtype}{float} y,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00299}00299             \textcolor{keywordtype}{float} z,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00300}00300             \textcolor{keywordtype}{float} dx,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00301}00301             \textcolor{keywordtype}{float} dy,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00302}00302             \textcolor{keywordtype}{float} dz,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00303}00303             \textcolor{keywordtype}{float} distance = -\/1,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00304}00304             \textcolor{keywordtype}{int} mesh\_id = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l00305}00305         );}
\DoxyCodeLine{\Hypertarget{a00212_source_l00306}00306         }
\DoxyCodeLine{\Hypertarget{a00212_source_l00307}00307 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00321}00321 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00367}00367         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_ade19fda460dadd98769b347840bd305a}{Occluded\_IMPL}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00368}00368             \textcolor{keyword}{const} std::array<float, 3>\& origin,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00369}00369             \textcolor{keyword}{const} std::array<float, 3>\& direction,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00370}00370             \textcolor{keywordtype}{float} max\_dist = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l00371}00371         );}
\DoxyCodeLine{\Hypertarget{a00212_source_l00372}00372 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00382}00382         RTCGeometry \mbox{\hyperlink{a01411_aa602f6c44fa5230477642942ebc3216e}{ConstructGeometryFromBuffers}}(std::vector<Triangle>\& tris, std::vector<Vertex>\& verts);}
\DoxyCodeLine{\Hypertarget{a00212_source_l00383}00383 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00384}00384     \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{a00212_source_l00400}00400         \mbox{\hyperlink{a01411}{EmbreeRayTracer}}(\textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a10fe757b08ab77289cfd945b29d14b89}{use\_precise}} = \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{a00212_source_l00401}00401 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00413}00413 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00430}00430         \mbox{\hyperlink{a01411}{EmbreeRayTracer}}(std::vector<\mbox{\hyperlink{a01351}{HF::Geometry::MeshInfo<float>}}>\& MI, \textcolor{keywordtype}{bool} use\_precise\_intersection = \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{a00212_source_l00431}00431 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00439}00439         \mbox{\hyperlink{a01411}{EmbreeRayTracer}}(\mbox{\hyperlink{a01351}{HF::Geometry::MeshInfo<float>}}\& MI, \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a10fe757b08ab77289cfd945b29d14b89}{use\_precise}} = \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{a00212_source_l00440}00440 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00441}00441 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00447}00447         \mbox{\hyperlink{a01411}{EmbreeRayTracer}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01411}{EmbreeRayTracer}}\& ERT2);}
\DoxyCodeLine{\Hypertarget{a00212_source_l00448}00448 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00449}00449 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00450}00450         }
\DoxyCodeLine{\Hypertarget{a00212_source_l00466}00466 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00485}00485         \mbox{\hyperlink{a01411}{EmbreeRayTracer}}(\textcolor{keyword}{const} std::vector<std::array<float, 3>>\& \mbox{\hyperlink{a01411_a3a243ef02c74fc6df958a4fd2506e7cc}{geometry}});}
\DoxyCodeLine{\Hypertarget{a00212_source_l00486}00486 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00501}00501 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00532}00532         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a6425a0f8f4a3ef8073e734ceb745cd1e}{AddMesh}}(std::vector<std::array<float, 3>>\& Mesh, \textcolor{keywordtype}{int} ID, \textcolor{keywordtype}{bool} Commit = \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{a00212_source_l00533}00533 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00548}00548 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00587}00587         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a6425a0f8f4a3ef8073e734ceb745cd1e}{AddMesh}}(\mbox{\hyperlink{a01351}{HF::Geometry::MeshInfo<float>}}\& Mesh, \textcolor{keywordtype}{bool} Commit);}
\DoxyCodeLine{\Hypertarget{a00212_source_l00588}00588 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00595}00595 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00646}00646         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a6425a0f8f4a3ef8073e734ceb745cd1e}{AddMesh}}(std::vector<\mbox{\hyperlink{a01351}{HF::Geometry::MeshInfo<float>}}>\& Meshes, \textcolor{keywordtype}{bool} Commit = \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{a00212_source_l00647}00647 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00666}00666 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00714}00714         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_aa8424b274c7c5d0598ff13b49ac8c8d2}{PointIntersection}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00715}00715             std::array<float, 3>\& origin,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00716}00716             \textcolor{keyword}{const} std::array<float, 3>\& dir,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00717}00717             \textcolor{keywordtype}{float} distance = -\/1,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00718}00718             \textcolor{keywordtype}{int} mesh\_id = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l00719}00719         );}
\DoxyCodeLine{\Hypertarget{a00212_source_l00720}00720 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00741}00741 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00785}00785         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_aa8424b274c7c5d0598ff13b49ac8c8d2}{PointIntersection}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00786}00786             \textcolor{keywordtype}{float}\& x,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00787}00787             \textcolor{keywordtype}{float}\& y,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00788}00788             \textcolor{keywordtype}{float}\& z,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00789}00789             \textcolor{keywordtype}{float} dx,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00790}00790             \textcolor{keywordtype}{float} dy,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00791}00791             \textcolor{keywordtype}{float} dz,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00792}00792             \textcolor{keywordtype}{float} distance = -\/1,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00793}00793             \textcolor{keywordtype}{int} mesh\_id = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l00794}00794         );}
\DoxyCodeLine{\Hypertarget{a00212_source_l00795}00795 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00833}00833 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00880}00880         std::vector<char> \mbox{\hyperlink{a01411_a0c4abe0d3160c1a59231e0ae492fe537}{PointIntersections}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00881}00881             std::vector<std::array<float, 3>>\& origins,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00882}00882             std::vector<std::array<float, 3>>\& directions,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00883}00883             \textcolor{keywordtype}{bool} use\_parallel = \textcolor{keyword}{true},}
\DoxyCodeLine{\Hypertarget{a00212_source_l00884}00884             \textcolor{keywordtype}{float} max\_distance = -\/1,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00885}00885             \textcolor{keywordtype}{int} mesh\_id = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l00886}00886         );}
\DoxyCodeLine{\Hypertarget{a00212_source_l00887}00887 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00888}00888 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00889}00889 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00922}00922 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00971}00971         std::vector<char> \mbox{\hyperlink{a01411_af718d171387e217f3c2172f795abfb90}{Occlusions}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l00972}00972             \textcolor{keyword}{const} std::vector<std::array<float, 3>>\& origins,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00973}00973             \textcolor{keyword}{const} std::vector<std::array<float, 3>>\& directions,}
\DoxyCodeLine{\Hypertarget{a00212_source_l00974}00974             \textcolor{keywordtype}{float} max\_distance = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l00975}00975             , \textcolor{keywordtype}{bool} use\_parallel = \textcolor{keyword}{true}}
\DoxyCodeLine{\Hypertarget{a00212_source_l00976}00976         );}
\DoxyCodeLine{\Hypertarget{a00212_source_l00977}00977 }
\DoxyCodeLine{\Hypertarget{a00212_source_l00978}00978 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01003}01003         \textcolor{keyword}{template} <\textcolor{keyword}{typename} return\_type = \textcolor{keywordtype}{double}, \textcolor{keyword}{class} N, \textcolor{keyword}{class} V>}
\DoxyCodeLine{\Hypertarget{a00212_source_l01004}\mbox{\hyperlink{a01411_aefb986188c0520e407fa3a39c89a0017}{01004}}         \mbox{\hyperlink{a01415}{HitStruct<return\_type>}} \mbox{\hyperlink{a01411_aefb986188c0520e407fa3a39c89a0017}{Intersect}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01005}01005             \textcolor{keyword}{const} N\& node,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01006}01006             \textcolor{keyword}{const} V\& direction,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01007}01007             \textcolor{keywordtype}{float} max\_distance = -\/1.0f, \textcolor{keywordtype}{int} mesh\_id = -\/0.1f)}
\DoxyCodeLine{\Hypertarget{a00212_source_l01008}01008         \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01009}01009             \textcolor{keywordflow}{return} Intersect<return\_type>(node[0], node[1], node[2], direction[0], direction[1], direction[2], max\_distance, mesh\_id);}
\DoxyCodeLine{\Hypertarget{a00212_source_l01010}01010         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01011}01011 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01043}01043         \textcolor{keyword}{template} <\textcolor{keyword}{typename} return\_type = \textcolor{keywordtype}{double}, \textcolor{keyword}{typename} numeric1 = \textcolor{keywordtype}{double}, \textcolor{keyword}{typename} numeric2 = \textcolor{keywordtype}{double}>}
\DoxyCodeLine{\Hypertarget{a00212_source_l01044}\mbox{\hyperlink{a01411_af37604ed6d68c27bb9224afd795cab18}{01044}}         \mbox{\hyperlink{a01415}{HitStruct<return\_type>}} \mbox{\hyperlink{a01411_af37604ed6d68c27bb9224afd795cab18}{Intersect}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01045}01045                 numeric1 x, numeric1 y, numeric1 z,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01046}01046                 numeric2 dx, numeric2 dy, numeric2 dz,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01047}01047                 \textcolor{keywordtype}{float} distance = -\/1.0f, \textcolor{keywordtype}{int} mesh\_id = -\/1)}
\DoxyCodeLine{\Hypertarget{a00212_source_l01048}01048         \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01049}01049             \textcolor{comment}{// create output value}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01050}01050             \mbox{\hyperlink{a01415}{HitStruct<return\_type>}} out\_struct;}
\DoxyCodeLine{\Hypertarget{a00212_source_l01051}01051 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01052}01052             \textcolor{comment}{// Cast the ray}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01053}01053             \textcolor{keyword}{auto} result = \mbox{\hyperlink{a01411_ae3341adf12ae91e33f1188a434d8e28d}{Intersect\_IMPL}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01054}01054                 x,y,z,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01055}01055                 dx,dy,dz, distance, mesh\_id}
\DoxyCodeLine{\Hypertarget{a00212_source_l01056}01056             );}
\DoxyCodeLine{\Hypertarget{a00212_source_l01057}01057 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01058}01058             \textcolor{comment}{// If an intersection occured, update the struct. }}
\DoxyCodeLine{\Hypertarget{a00212_source_l01059}01059             \textcolor{keywordflow}{if} (\mbox{\hyperlink{a00464_a2630761a64fac02a4ee33abaf5c885a1}{DidIntersect}}(result.hit.geomID))}
\DoxyCodeLine{\Hypertarget{a00212_source_l01060}01060             \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01061}01061                 \textcolor{comment}{// Use a precise ray intersection if required}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01062}01062                 \textcolor{keywordflow}{if} (!(this-\/>use\_precise))}
\DoxyCodeLine{\Hypertarget{a00212_source_l01063}01063                     out\_struct.\mbox{\hyperlink{a01415_a6fbe94ce3a7514a37415d28ff0500b64}{distance}} = result.ray.tfar;}
\DoxyCodeLine{\Hypertarget{a00212_source_l01064}01064                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01065}01065                     out\_struct.\mbox{\hyperlink{a01415_a6fbe94ce3a7514a37415d28ff0500b64}{distance}} = \mbox{\hyperlink{a01411_a28032c693ac330c5b11bc2a877b04c75}{CalculatePreciseDistance}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01066}01066                         result.hit.geomID,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01067}01067                         result.hit.primID,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01068}01068                         \mbox{\hyperlink{a01407}{Vector3D}}(x,y,z),}
\DoxyCodeLine{\Hypertarget{a00212_source_l01069}01069                         \mbox{\hyperlink{a01407}{Vector3D}}(dx,dy,dz)}
\DoxyCodeLine{\Hypertarget{a00212_source_l01070}01070                     );}
\DoxyCodeLine{\Hypertarget{a00212_source_l01071}01071                 out\_struct.\mbox{\hyperlink{a01415_a7c49a19e480ba9797c9da3d2acd2221d}{meshid}} = result.hit.geomID;}
\DoxyCodeLine{\Hypertarget{a00212_source_l01072}01072             \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01073}01073 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01074}01074             \textcolor{keywordflow}{return} out\_struct;}
\DoxyCodeLine{\Hypertarget{a00212_source_l01075}01075         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01076}01076 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01077}01077 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01100}01100         \textcolor{keyword}{template} <\textcolor{keyword}{typename} N, \textcolor{keyword}{typename} V, \textcolor{keyword}{typename} return\_type>}
\DoxyCodeLine{\Hypertarget{a00212_source_l01101}\mbox{\hyperlink{a01411_a7f8ab81033bdefaea0eea729aa9125ae}{01101}}         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a7f8ab81033bdefaea0eea729aa9125ae}{IntersectOutputArguments}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01102}01102             \textcolor{keyword}{const} N\& node,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01103}01103             \textcolor{keyword}{const} V\& direction,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01104}01104             return\_type\& out\_distance,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01105}01105             \textcolor{keywordtype}{int}\& out\_meshid,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01106}01106             \textcolor{keywordtype}{float} max\_distance = -\/1.0f)}
\DoxyCodeLine{\Hypertarget{a00212_source_l01107}01107         \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01108}01108             \mbox{\hyperlink{a01415}{HitStruct<return\_type>}} result = Intersect<return\_type>(node, direction, max\_distance);}
\DoxyCodeLine{\Hypertarget{a00212_source_l01109}01109             \textcolor{keywordflow}{if} (result.\mbox{\hyperlink{a01415_a3d86c2c8d8e0ec6bf63a653ec89807a8}{DidHit}}()) \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01110}01110                 out\_distance = result.\mbox{\hyperlink{a01415_a6fbe94ce3a7514a37415d28ff0500b64}{distance}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l01111}01111                 out\_meshid = result.\mbox{\hyperlink{a01415_a7c49a19e480ba9797c9da3d2acd2221d}{meshid}};}
\DoxyCodeLine{\Hypertarget{a00212_source_l01112}01112                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{a00212_source_l01113}01113             \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01114}01114             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01115}01115                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{a00212_source_l01116}01116         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01117}01117         }
\DoxyCodeLine{\Hypertarget{a00212_source_l01143}01143         \textcolor{keyword}{template} <\textcolor{keyword}{typename} return\_type, \textcolor{keyword}{typename} N, \textcolor{keyword}{typename} V>}
\DoxyCodeLine{\Hypertarget{a00212_source_l01144}\mbox{\hyperlink{a01411_afd4816ed296a73ccb7fe61e17cd75165}{01144}}         \textcolor{keyword}{inline} std::vector<HitStruct<return\_type>> \mbox{\hyperlink{a01411_afd4816ed296a73ccb7fe61e17cd75165}{Intersections}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01145}01145             \textcolor{keyword}{const} N \& nodes,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01146}01146             \textcolor{keyword}{const} V \& directions,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01147}01147             \textcolor{keywordtype}{float} max\_distance = -\/1.0f,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01148}01148             \textcolor{keyword}{const} \textcolor{keywordtype}{bool} use\_parallel = \textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{a00212_source_l01149}01149         \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01150}01150             \textcolor{keyword}{const} \textcolor{keywordtype}{int} n = nodes.size();}
\DoxyCodeLine{\Hypertarget{a00212_source_l01151}01151 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01152}01152             std::vector<HitStruct<return\_type>> results (nodes.size());}
\DoxyCodeLine{\Hypertarget{a00212_source_l01153}01153 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01154}01154 \textcolor{preprocessor}{            \#pragma omp parallel for schedule(dynamic, 256) if (use\_parallel)}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01155}01155             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; i++) \{\textcolor{comment}{// Use custom triangle intesection if required}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01156}01156                 \textcolor{keyword}{const} \textcolor{keyword}{auto}\& node = nodes[i];}
\DoxyCodeLine{\Hypertarget{a00212_source_l01157}01157                 \textcolor{keyword}{const} \textcolor{keyword}{auto}\& direction = directions[i];}
\DoxyCodeLine{\Hypertarget{a00212_source_l01158}01158                 results[i] = Intersect<return\_type>(node, direction);}
\DoxyCodeLine{\Hypertarget{a00212_source_l01159}01159             \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01160}01160             \textcolor{keywordflow}{return} results;}
\DoxyCodeLine{\Hypertarget{a00212_source_l01161}01161         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01162}01162 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01188}01188         \textcolor{keyword}{template} <\textcolor{keyword}{typename} N, \textcolor{keyword}{typename} V>}
\DoxyCodeLine{\Hypertarget{a00212_source_l01189}\mbox{\hyperlink{a01411_a3a7488f8e41c8a9e3dc9c334047c6457}{01189}}         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_a3a7488f8e41c8a9e3dc9c334047c6457}{Occluded}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01190}01190             \textcolor{keyword}{const} N\& origin,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01191}01191             \textcolor{keyword}{const} V\& direction,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01192}01192             \textcolor{keywordtype}{float} max\_distance = -\/1.0f,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01193}01193             \textcolor{keywordtype}{int} mesh\_id = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l01194}01194         ) \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01195}01195             \textcolor{keywordflow}{return} \mbox{\hyperlink{a01411_ade19fda460dadd98769b347840bd305a}{Occluded\_IMPL}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01196}01196                 origin[0], origin[1], origin[2],}
\DoxyCodeLine{\Hypertarget{a00212_source_l01197}01197                 direction[0], direction[1], direction[2],}
\DoxyCodeLine{\Hypertarget{a00212_source_l01198}01198                 max\_distance, mesh\_id}
\DoxyCodeLine{\Hypertarget{a00212_source_l01199}01199             );}
\DoxyCodeLine{\Hypertarget{a00212_source_l01200}01200         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01201}01201 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01202}01202 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01235}01235         \textcolor{keyword}{template} <\textcolor{keyword}{typename} numeric1, \textcolor{keyword}{typename} numeric2, \textcolor{keyword}{typename} dist\_type = \textcolor{keywordtype}{float}>}
\DoxyCodeLine{\Hypertarget{a00212_source_l01236}\mbox{\hyperlink{a01411_ae6b86b94ab1c45e137e384b8955064ad}{01236}}         \textcolor{keywordtype}{bool} \mbox{\hyperlink{a01411_ae6b86b94ab1c45e137e384b8955064ad}{Occluded}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01237}01237             numeric1 x, numeric1 y, numeric1 z,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01238}01238             numeric2 dx, numeric2 dy, numeric2 dz,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01239}01239             dist\_type max\_distance = -\/1.0,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01240}01240             \textcolor{keywordtype}{int} mesh\_id = -\/1}
\DoxyCodeLine{\Hypertarget{a00212_source_l01241}01241         ) \{}
\DoxyCodeLine{\Hypertarget{a00212_source_l01242}01242             \textcolor{keywordflow}{return} \mbox{\hyperlink{a01411_ade19fda460dadd98769b347840bd305a}{Occluded\_IMPL}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01243}01243                 x,y,z,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01244}01244                 dx,dy,dz,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01245}01245                 max\_distance, mesh\_id}
\DoxyCodeLine{\Hypertarget{a00212_source_l01246}01246             );}
\DoxyCodeLine{\Hypertarget{a00212_source_l01247}01247         \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01248}01248 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01251}01251 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01277}01277         \textcolor{keywordtype}{void} \mbox{\hyperlink{a01411_a70b9c1baf8390d8114c541d6a2ccb4f4}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01411}{EmbreeRayTracer}}\& ERT2);}
\DoxyCodeLine{\Hypertarget{a00212_source_l01278}01278 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01280}01280 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01303}01303         \mbox{\hyperlink{a01411_a2948458e764f0294996c91b00356073e}{\string~EmbreeRayTracer}}();}
\DoxyCodeLine{\Hypertarget{a00212_source_l01304}01304     \};}
\DoxyCodeLine{\Hypertarget{a00212_source_l01305}01305 }
\DoxyCodeLine{\Hypertarget{a00212_source_l01325}01325     \textcolor{keywordtype}{double} \mbox{\hyperlink{a00464_a9498ae7ffabd8c5bca4026374ac862e9}{RayTriangleIntersection}}(}
\DoxyCodeLine{\Hypertarget{a00212_source_l01326}01326         \textcolor{keyword}{const} Vector3D\& origin,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01327}01327         \textcolor{keyword}{const} Vector3D\& direction,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01328}01328         \textcolor{keyword}{const} Vector3D\& v1,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01329}01329         \textcolor{keyword}{const} Vector3D\& v2,}
\DoxyCodeLine{\Hypertarget{a00212_source_l01330}01330         \textcolor{keyword}{const} Vector3D\& v3);}
\DoxyCodeLine{\Hypertarget{a00212_source_l01331}01331 \}}
\DoxyCodeLine{\Hypertarget{a00212_source_l01332}01332 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
